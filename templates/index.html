
{% include 'base_head.html' %}
<div class="container">
  <header class="header">
    <h1>Expense Tracker</h1>
    <nav>
      <span class="muted">Hi, {{ user.username }}</span>
      <a href="/report">Reports</a>
      <a href="/settings">Settings</a>
      <a href="/export" class="btn">Export CSV</a>
      <a href="/logout" class="btn">Logout</a>
    </nav>
  </header>

  <main class="main-grid">
    <section class="card add-card">
      <h2>Add Expense</h2>
      <form action="/add" method="post" class="form">
        <label>Title
          <input name="title" placeholder="Lunch at cafe" required>
        </label>
        <label>Amount
          <input name="amount" type="number" step="0.01" placeholder="250.00" required>
        </label>
        <label>Category
          <select name="category">
            {% for c in categories %}
            <option value="{{c}}">{{c}}</option>
            {% endfor %}
          </select>
        </label>
        <label>Date & Time
          <input name="date" type="datetime-local">
        </label>
        <label>Note
          <input name="note" placeholder="Optional note">
        </label>
        <div style="display:flex;gap:8px;">
          <button class="btn primary">Add</button>
          <button type="reset" class="btn">Reset</button>
        </div>
      </form>
    </section>

    <section class="card list-card">
      <h2>Recent Expenses</h2>
      <div class="expenses">
        {% if expenses %}
          <table class="expenses-table">
            <thead><tr><th>Title</th><th>Amount</th><th>Category</th><th>Date</th><th></th></tr></thead>
            <tbody>
            {% for e in expenses %}
              <tr>
                <td>{{e.title}}</td>
                <td>₹ {{'%.2f'|format(e.amount)}}</td>
                <td>{{e.category}}</td>
                <td>{{e.created_at}}</td>
                <td>
                  <form action="/delete/{{e.id}}" method="post" onsubmit="return confirm('Delete this expense?')">
                    <button class="btn small">Delete</button>
                  </form>
                </td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="muted">No expenses yet — add your first one!</p>
        {% endif %}
      </div>
    </section>
  </main>

  <footer class="footer">
    Your finances, organized  — Clean, modern UI.
  </footer>
</div>
</body>
</html>
